{%- liquid
  assign design_scroll_limit = limit | default: 8
  assign heading_text = heading | default: 'Más diseños'
  assign view_all_label = view_all_label | default: ''
  assign view_all_link = view_all_link | default: ''
  assign product_cards = related_products | default: empty
  assign cards_rendered = 0
-%}

{%- if product_cards != empty -%}
  <div class="product-design-scroll product__info--spacing">
    <div class="d-flex between-xs middle-xs mb-12">
      <span class="h6 m-zero">{{ heading_text }}</span>
      {%- if view_all_link != blank and view_all_label != blank -%}
        <a class="btn-link design-scroll__view-all" href="{{ view_all_link }}">{{ view_all_label }}</a>
      {%- endif -%}
    </div>
    <div class="design-scroll__container scrollable scrollable-x disable-scrollbars" role="list" aria-label="{{ heading_text | escape }}">
      {%- for related_product in product_cards -%}
        {%- if related_product.id != current_product.id -%}
          {%- assign cards_rendered = cards_rendered | plus: 1 -%}
          {%- if cards_rendered > design_scroll_limit -%}{% break %}{% endif -%}
          <a class="design-scroll-card d-flex fd-column scrollable-aln-start" role="listitem" href="{{ related_product.url }}" title="{{ related_product.title | escape }}">
            <div class="design-scroll-card__media media-wrapper of-cover">
              {%- if related_product.featured_media -%}
                {%- assign preview_image = related_product.featured_media | default: related_product.featured_image -%}
                {%- assign preview_alt = preview_image.alt | default: related_product.title -%}
                {{ preview_image | image_url: width: 360 | image_tag: sizes: '(min-width: 769px) 160px, 120px', class: 'media design-scroll-card__image', alt: preview_alt, decoding: 'async', loading: 'lazy' }}
              {%- else -%}
                {{ 'product-1' | placeholder_svg_tag: 'placeholder media design-scroll-card__image' }}
              {%- endif -%}
            </div>
            <span class="design-scroll-card__title subtext mt-8">{{ related_product.title }}</span>
          </a>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>

  {%- unless product_design_scroll_styles_loaded -%}
    {%- assign product_design_scroll_styles_loaded = true -%}
    <style>
      .product-design-scroll {
        margin-top: calc(var(--spacing) * 1.5);
      }
      .design-scroll-card {
        gap: 8px;
        text-decoration: none;
        min-width: 120px;
        scroll-snap-align: start;
        margin-right: calc(var(--spacing));
      }
      .design-scroll-card__media {
        border-radius: 12px;
        overflow: hidden;
        aspect-ratio: 1/1;
        background-color: rgba(var(--color-normal-text-rgb), .06);
      }
      .design-scroll-card__image {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .design-scroll-card__title {
        display: block;
        text-align: center;
      }
      .design-scroll__container {
        display: flex;
        gap: calc(var(--spacing));
        padding-bottom: 8px;
        scroll-snap-type: x proximity;
        overflow-y: hidden;
        scrollbar-width: thin;
        scrollbar-color: rgba(var(--color-normal-text-rgb), .4) rgba(var(--color-normal-text-rgb), .12);
      }
      .design-scroll__container::-webkit-scrollbar {
        height: 6px;
      }
      .design-scroll__container::-webkit-scrollbar-track {
        background: rgba(var(--color-normal-text-rgb), .12);
        border-radius: 999px;
      }
      .design-scroll__container::-webkit-scrollbar-thumb {
        background: rgba(var(--color-normal-text-rgb), .4);
        border-radius: 999px;
      }
      @media (min-width: 769px) {
        .design-scroll-card {
          min-width: 160px;
        }
      }
    </style>
  {%- endunless -%}
{%- endif -%}

